<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="font" href="/grafana-infinity-datasource/_next/static/media/2aaf0723e720e8b9-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="https://user-images.githubusercontent.com/153843/93780448-1635d080-fc20-11ea-8c92-d6e91dbcf003.png#center"/><link rel="preload" as="image" href="https://user-images.githubusercontent.com/153843/93780923-ab38c980-fc20-11ea-9d87-078233102905.png#center"/><link rel="stylesheet" href="/grafana-infinity-datasource/_next/static/css/9a243bacb332825c.css" data-precedence="next"/><link rel="preload" href="/grafana-infinity-datasource/_next/static/chunks/webpack-80425f9e23b4ee04.js" as="script" fetchPriority="low"/><script src="/grafana-infinity-datasource/_next/static/chunks/fd9d1056-7fa96bc4412ca339.js" async=""></script><script src="/grafana-infinity-datasource/_next/static/chunks/596-582349f5b7d1459d.js" async=""></script><script src="/grafana-infinity-datasource/_next/static/chunks/main-app-484ba459bde116ba.js" async=""></script><title>Global Queries / Registered Queries</title><link rel="icon" href="/grafana-infinity-datasource/favicon.ico" type="image/x-icon" sizes="32x32"/><meta name="next-size-adjust"/><script src="/grafana-infinity-datasource/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_28f5cd"><div class="relative flex min-h-screen flex-col"><header class="sticky top-0 z-50 w-full border-none  backdrop-blur bg-gray-900 text-gray-100 border-gray-700"><div class="md:container flex gap-2 h-14 sm:items-center"><div class="mr-4 hidden md:flex"><nav class="flex items-center space-x-6 text-sm font-medium"><a class="flex items-center space-x-4 ml-6" href="/grafana-infinity-datasource"><img alt="Grafana Infinity Datasource plugin logo" loading="lazy" width="30" height="30" decoding="async" data-nimg="1" style="color:transparent" src="https://raw.githubusercontent.com/yesoreyeram/grafana-infinity-datasource/main/src/img/icon.svg"/><span class="hidden sm:inline-block">Grafana Infinity Datasource</span></a><a target="" class="transition-colors text-gray-100 hover:text-gray-200 flex" href="/grafana-infinity-datasource/docs/installation">Docs</a><a target="" class="transition-colors text-gray-100 hover:text-gray-200 flex" href="/grafana-infinity-datasource/blog">Blog &amp; Examples</a><a target="_blank" class="transition-colors text-gray-100 hover:text-gray-200 flex" href="https://github.com/yesoreyeram/grafana-infinity-datasource">GitHub<img alt="opening in external tab" loading="lazy" width="12" height="12" decoding="async" data-nimg="1" class="ml-1" style="color:transparent" src="https://www.svgrepo.com/show/510970/external-link.svg"/></a></nav></div><button class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground h-10 p-0 m-0 bg-none bg-transparent outline-none border-none md:hidden" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R2da:" data-state="closed"><img alt="open-menu" loading="lazy" width="30" height="30" decoding="async" data-nimg="1" class="m-2 py-6" style="color:transparent" src="https://www.svgrepo.com/show/465523/menu-alt-4.svg"/><span class="sr-only">Toggle Menu</span></button><div class="flex flex-1 items-center justify-between space-x-2 md:justify-end"><div class="w-full flex-1 md:w-auto md:flex-none"><button class="inline-flex items-center rounded-md font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 border border-input hover:bg-accent hover:text-accent-foreground h-10 px-4 py-2 relative w-full justify-start text-sm text-muted-foreground bg-gray-800 border-none sm:pr-12 md:w-40 lg:w-64"><span class="hidden lg:inline-flex">Search documentation...</span><span class="inline-flex lg:hidden">Search...</span><kbd class="pointer-events-none absolute right-1.5 top-1.5 hidden h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100 sm:flex"><span class="text-xs">âŒ˜</span>K</kbd></button></div><nav class="flex items-center"><a target="_blank" class="ml-2" href="https://github.com/yesoreyeram/grafana-infinity-datasource"><img alt="" loading="lazy" width="24" height="24" decoding="async" data-nimg="1" class="grayscale hover:grayscale-0" style="color:transparent" src="https://www.svgrepo.com/show/439171/github.svg"/><span class="sr-only">GitHub</span></a><a target="_blank" class="ml-2" href="https://twitter.com/grafanaInfinity"><img alt="" loading="lazy" width="24" height="24" decoding="async" data-nimg="1" class="grayscale hover:grayscale-0" style="color:transparent" src="https://www.svgrepo.com/show/448252/twitter.svg"/><span class="sr-only">Twitter</span></a><a target="_blank" class="ml-2" href="https://www.youtube.com/playlist?list=PL4vVKeEREln5ub1qrSMrwAabU0FiSNtmC"><img alt="" loading="lazy" width="24" height="24" decoding="async" data-nimg="1" class="grayscale hover:grayscale-0" style="color:transparent" src="https://www.svgrepo.com/show/448261/youtube.svg"/><span class="sr-only">Youtube</span></a></nav></div></div></header><main class="flex-1"><div><div class="container flex-1 items-start md:grid md:grid-cols-[220px_minmax(0,1fr)] md:gap-6 lg:grid-cols-[240px_minmax(0,1fr)] lg:gap-10"><aside class="fixed top-14 z-30 -ml-2 hidden h-[calc(100vh-3.5rem)] w-full shrink-0 md:sticky md:block"><div dir="ltr" class="relative overflow-hidden h-full py-6 pl-8 pr-6 lg:py-8" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" class="h-full w-full rounded-[inherit]" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="w-full"><div class="pb-4"><h4 class="mb-1 rounded-md px-2 py-1 text-sm font-semibold">Getting Started</h4><div class="grid grid-flow-row auto-rows-max text-sm"><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/installation">Installation</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/configuration">Configuration</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/provisioning">Provisioning</a></div></div><div class="pb-4"><h4 class="mb-1 rounded-md px-2 py-1 text-sm font-semibold">Formats</h4><div class="grid grid-flow-row auto-rows-max text-sm"><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/json">JSON</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/csv">CSV</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/xml">XML</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/html">HTML</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/graphql">GraphQL</a></div></div><div class="pb-4"><h4 class="mb-1 rounded-md px-2 py-1 text-sm font-semibold">Parsers</h4><div class="grid grid-flow-row auto-rows-max text-sm"><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/backend">Backend</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/uql">UQL</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/groq">GROQ</a></div></div><div class="pb-4"><h4 class="mb-1 rounded-md px-2 py-1 text-sm font-semibold">Features</h4><div class="grid grid-flow-row auto-rows-max text-sm"><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/authentication">Authentication</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/url">URL Configuration</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/template-variables">Variables</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/filters">Filters</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/macros">Macros</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/annotations">Annotations</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/node-graph">Node Graph</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/time-formats">Time Formats</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/reference-data">Reference Data</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/azure-blob-storage">Azure Blob storage</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 font-medium text-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/global-queries">Global Queries</a></div></div><div class="pb-4"><h4 class="mb-1 rounded-md px-2 py-1 text-sm font-semibold">Authentication</h4><div class="grid grid-flow-row auto-rows-max text-sm"><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/authentication#basic-authentication">Basic auth</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/authentication#bearer-token-authentication">Bearer token</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/authentication#api-key-authentication">API keys</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/authentication#digest-authentication">Digest auth</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/authentication#oauth-passthrough">OAuth forwarding</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/authentication#oauth2-client-credentials-authentication">OAuth2</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/azure-authentication">Azure</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/aws-authentication">AWS</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/authentication#gcp-authentication">GCP</a></div></div><div class="pb-4"><h4 class="mb-1 rounded-md px-2 py-1 text-sm font-semibold">Other</h4><div class="grid grid-flow-row auto-rows-max text-sm"><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/docs/limitations">Known Limitations</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/changelog">Changelog</a><a class="group flex w-full items-center rounded-md border border-transparent px-2 py-1 hover:bg-slate-200 text-muted-foreground" target="" rel="" href="/grafana-infinity-datasource/license">License</a></div></div></div></div></div></div></aside><main class="relative py-6 lg:gap-10 lg:py-8"><div class="mx-auto w-full min-w-0"><article class="py-1 prose dark:prose-invert"><header><h1 class="mb-2 font-extrabold text-2xl">Global Queries / Registered Queries</h1><p class="space-x-1 text-xs text-gray-500"></p></header><hr class="my-6"/><div class="markdown-content"><blockquote class="mt-6 border-l-2 pl-6 italic">
<p><strong>DEPRECATED</strong>. From v0.7.8, This feature is deprecated in favour of Grafana panel library.</p>
</blockquote>
<p>Working with same queries in multiple dashboards might be hard some times. To change a query, you need to update all the dashboards. So Infinity datasource gives an option to register queries globally and then allows to reuse the queries across dashboards.</p>
<h3 id="creating-a-global-query" class="pb-2 font-bold"><a class="anchor" href="#creating-a-global-query"><span class="icon icon-link"></span></a>Creating a global query<a href="#creating-a-global-query" class="anchor-link ml-2 text-orange-500">#</a></h3>
<p>To register a query, in the datasource instance settings perform the following actions</p>
<ul class="my-6 ml-6 list-disc">
<li class="mt-2">Click <strong>Add Global Query</strong> button</li>
<li class="mt-2">Change the name and id of the query. Id should be unique per datasource instance.</li>
<li class="mt-2">Enter the query fields.</li>
<li class="mt-2">Click <code class="relative rounded px-[0.3rem] py-[0.2rem] font-mono text-sm">Save</code></li>
</ul>
<p><img src="https://user-images.githubusercontent.com/153843/93780448-1635d080-fc20-11ea-8c92-d6e91dbcf003.png#center" alt="image"/></p>
<p>You can have multiple queries registered per datasource instance.</p>
<h3 id="using-global-queries-in-the-panel" class="pb-2 font-bold"><a class="anchor" href="#using-global-queries-in-the-panel"><span class="icon icon-link"></span></a>Using global queries in the panel<a href="#using-global-queries-in-the-panel" class="anchor-link ml-2 text-orange-500">#</a></h3>
<p>In order to use the registered query in the dashboard, you have to select <code class="relative rounded px-[0.3rem] py-[0.2rem] font-mono text-sm">Global Query</code> / <code class="relative rounded px-[0.3rem] py-[0.2rem] font-mono text-sm">global</code> as type. Then select the query you needed from the list.</p>
<p><img src="https://user-images.githubusercontent.com/153843/93780923-ab38c980-fc20-11ea-9d87-078233102905.png#center" alt="image"/></p>
<h3 id="provision-the-global-queries" class="pb-2 font-bold"><a class="anchor" href="#provision-the-global-queries"><span class="icon icon-link"></span></a>Provision the global queries<a href="#provision-the-global-queries" class="anchor-link ml-2 text-orange-500">#</a></h3>
<p>You can also provision the global queries in the datasource provisioning. Below example provides a sample of inline csv query provisioning</p>
<pre class="mb-4 mt-6 p-6 max-h-[650px] overflow-x-auto text-orange-100 rounded-lg border bg-zinc-950 py-4 dark:bg-zinc-900 language-yaml"><code class="relative rounded px-[0.3rem] py-[0.2rem] font-mono text-sm language-yaml code-highlight"><span class="code-line"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> <span class="token number">1</span>
</span><span class="code-line"><span class="token key atrule">datasources</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ProvisionedQueries
</span><span class="code-line">    <span class="token key atrule">type</span><span class="token punctuation">:</span> yesoreyeram<span class="token punctuation">-</span>infinity<span class="token punctuation">-</span>datasource
</span><span class="code-line">    <span class="token key atrule">access</span><span class="token punctuation">:</span> proxy
</span><span class="code-line">    <span class="token key atrule">isDefault</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</span><span class="code-line">    <span class="token key atrule">basicAuth</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</span><span class="code-line">    <span class="token key atrule">jsonData</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token key atrule">datasource_mode</span><span class="token punctuation">:</span> <span class="token string">&#x27;basic&#x27;</span>
</span><span class="code-line">      <span class="token key atrule">global_queries</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Countries
</span><span class="code-line">          <span class="token key atrule">id</span><span class="token punctuation">:</span> countries
</span><span class="code-line">          <span class="token key atrule">query</span><span class="token punctuation">:</span>
</span><span class="code-line">            <span class="token key atrule">type</span><span class="token punctuation">:</span> csv
</span><span class="code-line">            <span class="token key atrule">source</span><span class="token punctuation">:</span> inline
</span><span class="code-line">            <span class="token key atrule">format</span><span class="token punctuation">:</span> table
</span><span class="code-line">            <span class="token key atrule">data</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
</span></span><span class="code-line"><span class="token scalar string">              country,continent
</span></span><span class="code-line"><span class="token scalar string">              india,asia
</span></span><span class="code-line"><span class="token scalar string">              china,asia
</span></span><span class="code-line"><span class="token scalar string">              uk,europe</span>
</span><span class="code-line">            <span class="token key atrule">columns</span><span class="token punctuation">:</span>
</span><span class="code-line">              <span class="token punctuation">-</span> <span class="token key atrule">selector</span><span class="token punctuation">:</span> country
</span><span class="code-line">                <span class="token key atrule">text</span><span class="token punctuation">:</span> Country
</span><span class="code-line">                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
</span><span class="code-line">              <span class="token punctuation">-</span> <span class="token key atrule">selector</span><span class="token punctuation">:</span> continent
</span><span class="code-line">                <span class="token key atrule">text</span><span class="token punctuation">:</span> Continent
</span><span class="code-line">                <span class="token key atrule">type</span><span class="token punctuation">:</span> string
</span><span class="code-line">    <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token number">1</span>
</span><span class="code-line">    <span class="token key atrule">readOnly</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</span></code></pre>
<h4 id="note" class="font-bold"><a class="anchor" href="#note"><span class="icon icon-link"></span></a>Note<a href="#note" class="anchor-link ml-2 text-orange-500">#</a></h4>
<ul class="my-6 ml-6 list-disc">
<li class="mt-2">When using global queries, queries will be loaded from the datasource setting when loading the dashboard only. If the query changed, dashboards will get reflected only when they are reloaded. (Query refresh won&#x27;t fetch the latest query)</li>
<li class="mt-2">When provisioning, grafana variables / tokens like <code class="relative rounded px-[0.3rem] py-[0.2rem] font-mono text-sm">${__from}</code> are not supported yet.</li>
</ul></div></article></div></main></div></div></main><footer class="py-6 border-t-1 border-gray-700 text-center bg-gray-800"><div class="container flex flex-col items-center justify-between gap-4 md:flex-row"><p class="text-center text-sm leading-loose text-muted-foreground w-full">Created &amp; Maintained by <b>Sriram</b></p></div></footer></div><script src="/grafana-infinity-datasource/_next/static/chunks/webpack-80425f9e23b4ee04.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/grafana-infinity-datasource/_next/static/media/2aaf0723e720e8b9-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n2:HL[\"/grafana-infinity-datasource/_next/static/css/9a243bacb332825c.css\",{\"as\":\"style\"}]\n0:\"$L3\"\n"])</script><script>self.__next_f.push([1,"4:I{\"id\":7948,\"chunks\":[\"272:static/chunks/webpack-80425f9e23b4ee04.js\",\"971:static/chunks/fd9d1056-7fa96bc4412ca339.js\",\"596:static/chunks/596-582349f5b7d1459d.js\"],\"name\":\"default\",\"async\":false}\n6:I{\"id\":6628,\"chunks\":[\"272:static/chunks/webpack-80425f9e23b4ee04.js\",\"971:static/chunks/fd9d1056-7fa96bc4412ca339.js\",\"596:static/chunks/596-582349f5b7d1459d.js\"],\"name\":\"\",\"async\":false}\n7:I{\"id\":3189,\"chunks\":[\"310:static/chunks/0e5ce63c-ef4c11e95cfe58be.js\",\"222:static/chunks/222-61f75ea56c49879c.js\",\"413:s"])</script><script>self.__next_f.push([1,"tatic/chunks/413-95877600faafadc3.js\",\"685:static/chunks/685-b14093ee69651263.js\",\"394:static/chunks/394-03304115f6c3a291.js\",\"185:static/chunks/app/layout-02561f6ad10d1b0a.js\"],\"name\":\"\",\"async\":false}\n8:I{\"id\":7767,\"chunks\":[\"272:static/chunks/webpack-80425f9e23b4ee04.js\",\"971:static/chunks/fd9d1056-7fa96bc4412ca339.js\",\"596:static/chunks/596-582349f5b7d1459d.js\"],\"name\":\"default\",\"async\":false}\n9:I{\"id\":7920,\"chunks\":[\"272:static/chunks/webpack-80425f9e23b4ee04.js\",\"971:static/chunks/fd9d1056-7fa96bc4412"])</script><script>self.__next_f.push([1,"ca339.js\",\"596:static/chunks/596-582349f5b7d1459d.js\"],\"name\":\"default\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"3:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/grafana-infinity-datasource/_next/static/css/9a243bacb332825c.css\",\"precedence\":\"next\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"XUi6dLmfvCagZz1WZ_ZEV\",\"assetPrefix\":\"/grafana-infinity-datasource\",\"initialCanonicalUrl\":\"/docs/global-queries\",\"initialTree\":[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"global-queries\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"global-queries\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":\"$L5\",\"globalErrorComponent\":\"$6\",\"children\":[null,[\"$\",\"$L7\",null,{\"children\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"className\":\"text-center m-auto ml-[30%] my-[25%]\",\"children\":\"Sorry..! Page not found.\"}],\"notFoundStyles\":[],\"childProp\":{\"current\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\",[\"slug\",\"global-queries\",\"c\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$La\",\"$Lb\",null],\"segment\":\"__PAGE__?{\\\"slug\\\":[\\\"global-queries\\\"]}\"},\"styles\":[]}],\"segment\":[\"slug\",\"global-queries\",\"c\"]},\"styles\":[]}],\"segment\":\"docs\"},\"styles\":[]}],\"params\":{}}],null]}]]\n"])</script><script>self.__next_f.push([1,"c:I{\"id\":4785,\"chunks\":[\"222:static/chunks/222-61f75ea56c49879c.js\",\"413:static/chunks/413-95877600faafadc3.js\",\"687:static/chunks/app/docs/[...slug]/page-27ae022c04cbde36.js\"],\"name\":\"Mdx\",\"async\":false}\nd:T2cfa,"])</script><script>self.__next_f.push([1,"var Component=(()=\u003e{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var N=(a,e)=\u003e()=\u003e(e||a((e={exports:{}}).exports,e),e.exports),g=(a,e)=\u003e{for(var s in e)c(a,s,{get:e[s],enumerable:!0})},t=(a,e,s,i)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let l of u(e))!k.call(a,l)\u0026\u0026l!==s\u0026\u0026c(a,l,{get:()=\u003ee[l],enumerable:!(i=p(e,l))||i.enumerable});return a};var y=(a,e,s)=\u003e(s=a!=null?h(m(a)):{},t(e||!a||!a.__esModule?c(s,\"default\",{value:a,enumerable:!0}):s,a)),b=a=\u003et(c({},\"__esModule\",{value:!0}),a);var o=N((w,r)=\u003e{r.exports=_jsx_runtime});var _={};g(_,{default:()=\u003ev,frontmatter:()=\u003ef});var n=y(o()),f={slug:\"/wiki/global-queries\",title:\"Global Queries / Registered Queries\",previous_page_title:\"Provisioning\",previous_page_slug:\"/wiki/provisioning\",next_page_title:\"Configuration\",next_page_slug:\"/wiki/configuration\"};function d(a){let e=Object.assign({blockquote:\"blockquote\",p:\"p\",strong:\"strong\",h3:\"h3\",a:\"a\",span:\"span\",ul:\"ul\",li:\"li\",code:\"code\",img:\"img\",pre:\"pre\",h4:\"h4\"},a.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"DEPRECATED\"}),\". From v0.7.8, This feature is deprecated in favour of Grafana panel library.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Working with same queries in multiple dashboards might be hard some times. To change a query, you need to update all the dashboards. So Infinity datasource gives an option to register queries globally and then allows to reuse the queries across dashboards.\"}),`\n`,(0,n.jsxs)(e.h3,{id:\"creating-a-global-query\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#creating-a-global-query\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Creating a global query\"]}),`\n`,(0,n.jsx)(e.p,{children:\"To register a query, in the datasource instance settings perform the following actions\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"Click \",(0,n.jsx)(e.strong,{children:\"Add Global Query\"}),\" button\"]}),`\n`,(0,n.jsx)(e.li,{children:\"Change the name and id of the query. Id should be unique per datasource instance.\"}),`\n`,(0,n.jsx)(e.li,{children:\"Enter the query fields.\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"Click \",(0,n.jsx)(e.code,{children:\"Save\"})]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://user-images.githubusercontent.com/153843/93780448-1635d080-fc20-11ea-8c92-d6e91dbcf003.png#center\",alt:\"image\"})}),`\n`,(0,n.jsx)(e.p,{children:\"You can have multiple queries registered per datasource instance.\"}),`\n`,(0,n.jsxs)(e.h3,{id:\"using-global-queries-in-the-panel\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#using-global-queries-in-the-panel\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Using global queries in the panel\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"In order to use the registered query in the dashboard, you have to select \",(0,n.jsx)(e.code,{children:\"Global Query\"}),\" / \",(0,n.jsx)(e.code,{children:\"global\"}),\" as type. Then select the query you needed from the list.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://user-images.githubusercontent.com/153843/93780923-ab38c980-fc20-11ea-9d87-078233102905.png#center\",alt:\"image\"})}),`\n`,(0,n.jsxs)(e.h3,{id:\"provision-the-global-queries\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#provision-the-global-queries\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Provision the global queries\"]}),`\n`,(0,n.jsx)(e.p,{children:\"You can also provision the global queries in the datasource provisioning. Below example provides a sample of inline csv query provisioning\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-yaml\",children:(0,n.jsxs)(e.code,{className:\"language-yaml code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"apiVersion\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"datasources\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"  \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` ProvisionedQueries\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" yesoreyeram\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\"infinity\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),`datasource\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"access\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` proxy\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"isDefault\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean important\",children:\"false\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"basicAuth\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean important\",children:\"false\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"jsonData\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"datasource_mode\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'basic'\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"      \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"global_queries\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"        \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"name\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` Countries\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"id\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` countries\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"          \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"query\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` csv\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"source\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` inline\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"format\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` table\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"data\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"|\"}),(0,n.jsx)(e.span,{className:\"token scalar string\",children:`\n`})]}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token scalar string\",children:`              country,continent\n`})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token scalar string\",children:`              india,asia\n`})}),(0,n.jsx)(e.span,{className:\"code-line\",children:(0,n.jsx)(e.span,{className:\"token scalar string\",children:`              china,asia\n`})}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token scalar string\",children:\"              uk,europe\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"            \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"columns\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"              \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"selector\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` country\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"text\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` Country\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` string\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"              \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"selector\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` continent\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"text\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` Continent\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"                \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"type\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),` string\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"version\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token number\",children:\"1\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[\"    \",(0,n.jsx)(e.span,{className:\"token key atrule\",children:\"readOnly\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,n.jsx)(e.span,{className:\"token boolean important\",children:\"true\"}),`\n`]})]})}),`\n`,(0,n.jsxs)(e.h4,{id:\"note\",children:[(0,n.jsx)(e.a,{className:\"anchor\",href:\"#note\",children:(0,n.jsx)(e.span,{className:\"icon icon-link\"})}),\"Note\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"When using global queries, queries will be loaded from the datasource setting when loading the dashboard only. If the query changed, dashboards will get reflected only when they are reloaded. (Query refresh won't fetch the latest query)\"}),`\n`,(0,n.jsxs)(e.li,{children:[\"When provisioning, grafana variables / tokens like \",(0,n.jsx)(e.code,{children:\"${__from}\"}),\" are not supported yet.\"]}),`\n`]})]})}function q(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,Object.assign({},a,{children:(0,n.jsx)(d,a)})):d(a)}var v=q;return b(_);})();\n;return Component;"])</script><script>self.__next_f.push([1,"b:[\"$\",\"article\",null,{\"className\":\"py-1 prose dark:prose-invert\",\"children\":[\"$undefined\",[\"$\",\"header\",null,{\"children\":[[\"$\",\"h1\",null,{\"className\":\"mb-2 font-extrabold text-2xl\",\"children\":\"Global Queries / Registered Queries\"}],\"$undefined\",[\"$\",\"p\",null,{\"className\":\"space-x-1 text-xs text-gray-500\"}]]}],[\"$\",\"hr\",null,{\"className\":\"my-6\"}],[\"$\",\"div\",null,{\"className\":\"markdown-content\",\"children\":[\"$\",\"$Lc\",null,{\"code\":\"$d\"}]}]]}]\n5:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\""])</script><script>self.__next_f.push([1,":\"Global Queries / Registered Queries\"}],[\"$\",\"meta\",\"2\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"link\",\"3\",{\"rel\":\"icon\",\"href\":\"/grafana-infinity-datasource/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"32x32\"}],[\"$\",\"meta\",\"4\",{\"name\":\"next-size-adjust\"}]]\na:null\n"])</script></body></html>