<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Global Queries / Registered Queries | Grafana Infinity Datasource</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="Do infinite things with Grafana. Turn any website into beautiful grafana dashboards.">
    <meta property="og:title" content="Grafana Infinity Datasource Plugin">
    <meta property="og:description" content="Do infinite things with Grafana. Turn any website into beautiful grafana dashboards. Supports HTML, CSV, JSON, XML & GraphQL documents.">
    <meta property="og:image" content="https://user-images.githubusercontent.com/153843/92741922-03491380-f377-11ea-9c31-9a744afd3388.png">
    <meta property="og:url" content="https://yesoreyeram.github.io/grafana-infinity-datasource">
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:site" content="@yesoreyeram.github.io/grafana-infinity-datasource">
    <meta property="twitter:title" content="Grafana Infinity Datasource Plugin.">
    <meta property="twitter:description" content="Do infinite things with Grafana. Turn any website into beautiful grafana dashboards. Supports HTML, CSV, JSON, XML & GraphQL documents.">
    <meta property="twitter:image" content="https://user-images.githubusercontent.com/153843/92741922-03491380-f377-11ea-9c31-9a744afd3388.png">
    <link rel="preload" href="/grafana-infinity-datasource/assets/css/0.styles.727a8373.css" as="style"><link rel="preload" href="/grafana-infinity-datasource/assets/js/app.2327ec5e.js" as="script"><link rel="preload" href="/grafana-infinity-datasource/assets/js/2.3d680701.js" as="script"><link rel="preload" href="/grafana-infinity-datasource/assets/js/10.d6c9ba5e.js" as="script"><link rel="prefetch" href="/grafana-infinity-datasource/assets/js/11.d53216e7.js"><link rel="prefetch" href="/grafana-infinity-datasource/assets/js/12.610038d3.js"><link rel="prefetch" href="/grafana-infinity-datasource/assets/js/13.b51d5de5.js"><link rel="prefetch" href="/grafana-infinity-datasource/assets/js/14.4571819d.js"><link rel="prefetch" href="/grafana-infinity-datasource/assets/js/15.ab71750f.js"><link rel="prefetch" href="/grafana-infinity-datasource/assets/js/16.35aad45a.js"><link rel="prefetch" href="/grafana-infinity-datasource/assets/js/17.75a56ecf.js"><link rel="prefetch" href="/grafana-infinity-datasource/assets/js/18.099a64ef.js"><link rel="prefetch" href="/grafana-infinity-datasource/assets/js/3.2468536f.js"><link rel="prefetch" href="/grafana-infinity-datasource/assets/js/4.5ed19beb.js"><link rel="prefetch" href="/grafana-infinity-datasource/assets/js/5.1644a315.js"><link rel="prefetch" href="/grafana-infinity-datasource/assets/js/6.3d9103b7.js"><link rel="prefetch" href="/grafana-infinity-datasource/assets/js/7.f3db6f63.js"><link rel="prefetch" href="/grafana-infinity-datasource/assets/js/8.e998c081.js"><link rel="prefetch" href="/grafana-infinity-datasource/assets/js/9.91313cf7.js">
    <link rel="stylesheet" href="/grafana-infinity-datasource/assets/css/0.styles.727a8373.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/grafana-infinity-datasource/" class="home-link router-link-active"><!----> <span class="site-name">Grafana Infinity Datasource</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/grafana-infinity-datasource/wiki/installation.html" class="nav-link">
  Install
</a></div><div class="nav-item"><a href="https://github.com/yesoreyeram/grafana-infinity-datasource/issues/new/choose" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Report Bug
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/yesoreyeram/grafana-infinity-datasource" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://sriramajeyam.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Author
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/grafana-infinity-datasource/wiki/installation.html" class="nav-link">
  Install
</a></div><div class="nav-item"><a href="https://github.com/yesoreyeram/grafana-infinity-datasource/issues/new/choose" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Report Bug
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/yesoreyeram/grafana-infinity-datasource" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://sriramajeyam.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Author
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/grafana-infinity-datasource/wiki/features.html" class="sidebar-link">Guide</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/features.html#features" class="sidebar-link">Features</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/features.html#license" class="sidebar-link">License</a></li></ul></li><li><a href="/grafana-infinity-datasource/wiki/csv.html" class="sidebar-link">CSV</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/csv.html#csv-features-summary" class="sidebar-link">CSV Features &amp; Summary</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/csv.html#csv-url" class="sidebar-link">CSV URL</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/csv.html#csv-inline" class="sidebar-link">CSV Inline</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/csv.html#csv-to-timeseries" class="sidebar-link">CSV to timeseries</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/csv.html#time-formats" class="sidebar-link">Time formats</a></li></ul></li><li><a href="/grafana-infinity-datasource/wiki/json.html" class="sidebar-link">JSON</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/json.html#json-url" class="sidebar-link">JSON URL</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/json.html#json-inline" class="sidebar-link">JSON Inline</a></li></ul></li><li><a href="/grafana-infinity-datasource/wiki/graphql.html" class="sidebar-link">GraphQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/graphql.html#graphql-scrapping" class="sidebar-link">GraphQL Scrapping</a></li></ul></li><li><a href="/grafana-infinity-datasource/wiki/xml.html" class="sidebar-link">XML</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/xml.html#xml-inline" class="sidebar-link">XML Inline</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/xml.html#xml-url" class="sidebar-link">XML URL</a></li></ul></li><li><a href="/grafana-infinity-datasource/wiki/html.html" class="sidebar-link">HTML</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/html.html#html-url-web-scraping" class="sidebar-link">HTML URL / Web Scraping</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/html.html#cors-setup" class="sidebar-link">CORS setup</a></li></ul></li><li><a href="/grafana-infinity-datasource/wiki/global-queries.html" aria-current="page" class="active sidebar-link">Global Queries</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/global-queries.html#global-queries-registered-queries" class="sidebar-link">Global Queries / Registered Queries</a></li></ul></li><li><a href="/grafana-infinity-datasource/wiki/template-variables.html" class="sidebar-link">Template Variables</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/template-variables.html#variables" class="sidebar-link">variables</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/template-variables.html#collection-key-value-pair" class="sidebar-link">Collection ( Key value pair )</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/template-variables.html#collectionlookup-key-value-pair-and-lookup-variable" class="sidebar-link">CollectionLookup ( Key value pair and Lookup Variable )</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/template-variables.html#join-concat-variables-into-a-new-variable" class="sidebar-link">Join ( Concat variables into a new variable )</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/template-variables.html#random-random-element-from-csv" class="sidebar-link">Random ( Random element from CSV)</a></li></ul></li><li><a href="/grafana-infinity-datasource/wiki/showcase/github-stats.html" class="sidebar-link">Github Example</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/showcase/github-stats.html#github-stats" class="sidebar-link">Github Stats</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/showcase/github-stats.html#github-organization-summary-example" class="sidebar-link">Github Organization Summary example</a></li></ul></li><li><a href="/grafana-infinity-datasource/wiki/installation.html" class="sidebar-link">Installation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/installation.html#installation" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/installation.html#configuration" class="sidebar-link">Configuration</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/wiki/installation.html#provisioning" class="sidebar-link">Provisioning</a></li></ul></li><li><a href="/grafana-infinity-datasource/CHANGELOG.html" class="sidebar-link">Change Log</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/CHANGELOG.html#_0-5-0" class="sidebar-link">[0.5.0]</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/CHANGELOG.html#_0-4-0" class="sidebar-link">[ 0.4.0 ]</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/CHANGELOG.html#_0-3-0" class="sidebar-link">[ 0.3.0 ]</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/CHANGELOG.html#_0-2-0" class="sidebar-link">[ 0.2.0 ]</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/CHANGELOG.html#_0-1-0" class="sidebar-link">[ 0.1.0 ]</a></li><li class="sidebar-sub-header"><a href="/grafana-infinity-datasource/CHANGELOG.html#_0-0-1" class="sidebar-link">[ 0.0.1 ]</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="global-queries-registered-queries"><a href="#global-queries-registered-queries" class="header-anchor">#</a> Global Queries / Registered Queries</h2> <p>Working with same queries in multiple dashboards might be hard some times. To change a query, you need to update all the dashboards. So Infinity datasource gives an option to register queries globally and then allows to reuse the queries across dashboards.</p> <h3 id="registering-query"><a href="#registering-query" class="header-anchor">#</a> Registering Query</h3> <p>To register a query, in the datasource instance settings perform the following actions</p> <ul><li>Click <strong>Add Global Query</strong> button</li> <li>Change the name and id of the query. Id should be unique per datasource instance.</li> <li>Enter the query fields.</li> <li>Click <code>Save</code></li></ul> <p><img src="https://user-images.githubusercontent.com/153843/93780448-1635d080-fc20-11ea-8c92-d6e91dbcf003.png" alt="image"></p> <p>You can have multiple queries registered per datasource instance.</p> <h3 id="using-registered-queries-in-the-panel"><a href="#using-registered-queries-in-the-panel" class="header-anchor">#</a> Using Registered queries in the panel</h3> <p>In order to use the registered query in the dashboard, you have to select <code>Global Query</code> / <code>global</code> as type. Then select the query you needed from the list.</p> <p><img src="https://user-images.githubusercontent.com/153843/93780923-ab38c980-fc20-11ea-9d87-078233102905.png" alt="image"></p> <h3 id="provision-the-global-queries"><a href="#provision-the-global-queries" class="header-anchor">#</a> Provision the global queries</h3> <p>You can also provision the global queries in the datasource provisioning. Below example provides a sample of inline csv query provisioning</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> <span class="token number">1</span>
<span class="token key atrule">datasources</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> ProvisionedQueries
  <span class="token key atrule">type</span><span class="token punctuation">:</span> yesoreyeram<span class="token punctuation">-</span>infinity<span class="token punctuation">-</span>datasource
  <span class="token key atrule">access</span><span class="token punctuation">:</span> proxy
  <span class="token key atrule">isDefault</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">basicAuth</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">jsonData</span><span class="token punctuation">:</span>
       <span class="token key atrule">datasource_mode</span><span class="token punctuation">:</span> <span class="token string">&quot;basic&quot;</span>
       <span class="token key atrule">global_queries</span><span class="token punctuation">:</span>
          <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Countries
            <span class="token key atrule">id</span><span class="token punctuation">:</span> countries
            <span class="token key atrule">query</span><span class="token punctuation">:</span>
               <span class="token key atrule">type</span><span class="token punctuation">:</span> csv
               <span class="token key atrule">source</span><span class="token punctuation">:</span> inline
               <span class="token key atrule">format</span><span class="token punctuation">:</span> table
               <span class="token key atrule">data</span> <span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
                    country,continent
                    india,asia
                    china,asia
                    uk,europe</span>
               <span class="token key atrule">columns</span><span class="token punctuation">:</span>
                    <span class="token punctuation">-</span> <span class="token key atrule">selector</span><span class="token punctuation">:</span> country
                      <span class="token key atrule">text</span><span class="token punctuation">:</span> Country
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
                    <span class="token punctuation">-</span> <span class="token key atrule">selector</span><span class="token punctuation">:</span> continent
                      <span class="token key atrule">text</span><span class="token punctuation">:</span> Continent
                      <span class="token key atrule">type</span><span class="token punctuation">:</span> string
  <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token key atrule">readOnly</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre></div><h4 id="note"><a href="#note" class="header-anchor">#</a> Note</h4> <ul><li>When using global queries, queries will be loaded from the datasource setting when loading the dashboard only. If the query changed, dashboards will get reflected only when they are reloaded. (Query refresh won't fetch the latest query)</li> <li>When provisioning, grafana variables / tokens like <code>${__from}</code> are not supported yet.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/grafana-infinity-datasource/wiki/html.html" class="prev">
        HTML
      </a></span> <span class="next"><a href="/grafana-infinity-datasource/wiki/template-variables.html">
        Template Variables
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/grafana-infinity-datasource/assets/js/app.2327ec5e.js" defer></script><script src="/grafana-infinity-datasource/assets/js/2.3d680701.js" defer></script><script src="/grafana-infinity-datasource/assets/js/10.d6c9ba5e.js" defer></script>
  </body>
</html>
